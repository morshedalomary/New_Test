{"ast":null,"code":"import _asyncToGenerator from \"S:\\\\PlanA_Assessment\\\\WebAppAngular\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { PopUpDialog } from '../../pop-up-dialog/pop-up.component';\nlet AddEditProdComponent = class AddEditProdComponent {\n  constructor(_categoryService, dialog, _productService, _location, _activatedRoute, formBuilder) {\n    this._categoryService = _categoryService;\n    this.dialog = dialog;\n    this._productService = _productService;\n    this._location = _location;\n    this._activatedRoute = _activatedRoute;\n    this.formBuilder = formBuilder;\n    this.fileUpload = '';\n    this.selectedFile = [];\n    this.selected = '';\n    this.categorys = [];\n    this.firstFormGroup = this.formBuilder.group({\n      title: ['', Validators.required],\n      description: ['', null],\n      price: [0, Validators.required],\n      dietary_flags: ['', Validators.required],\n      number_of_Views: [0, null],\n      categoryID: ['', Validators.required]\n    });\n  }\n\n  onFileSelected(event) {\n    this.selectedFile = event.target.files;\n    const filedata = new FormData();\n\n    for (var i = 0; i < this.selectedFile.length; i++) {\n      filedata.append('image', this.selectedFile[i], this.selectedFile[i].name);\n    }\n  }\n\n  ngOnInit() {\n    this._categoryService.getAllCategoryList().subscribe(data => {\n      // console.log(\"getAllCategoryList\" + JSON.stringify(data))\n      this.categorys = data; // console.log(\"getAllCategoryList\" + JSON.stringify(this.categorys))\n\n      this.selected = this.categorys[0]['id']; // console.log(\"selected\" + this.selected)\n    });\n\n    let productID = this._activatedRoute.snapshot.paramMap.get('productID');\n\n    if (productID != \"\") {\n      this._productService.getProduct(productID).subscribe(data => {\n        this.product = data;\n        console.log(JSON.stringify(this.product));\n        this.firstFormGroup.controls['title'].setValue(this.product['title']);\n        this.firstFormGroup.controls['description'].setValue(this.product['description']);\n        this.firstFormGroup.controls['price'].setValue(this.product['price']);\n        this.firstFormGroup.controls['dietary_flags'].setValue(this.product['dietary_flags']);\n        this.firstFormGroup.controls['number_of_Views'].setValue(this.product['number_of_Views']);\n      });\n    }\n  }\n\n  addBackGround() {\n    _asyncToGenerator(function* () {\n      const file = yield chooser.getFile();\n\n      if (file.length === 0) {\n        console.log(\"return return \");\n        return;\n      }\n\n      localStorage.setItem('handlefileBackground', file.dataURI);\n      console.log(\"addBackGround stringify \" + file.dataURI); // console.log(\"addBackGround stringify \"+JSON.parse(file));\n\n      console.log(file ? file.name : 'canceled');\n    })(); //console.log(\"addBackGround\");\n    //document.getElementById('fileBackground').click();\n\n  }\n\n  handlefileBackground(files) {\n    if (files.length === 0) {\n      return;\n    }\n\n    let fileReader = new FileReader();\n\n    fileReader.onload = e => {\n      this.fileUpload = fileReader.result + \"\";\n      console.log(\"this.fileUpload\" + this.fileUpload);\n    };\n\n    fileReader.readAsDataURL(files[0]);\n  }\n\n  onSubmit() {\n    if (this.firstFormGroup.invalid) {\n      const dialogRef = this.dialog.open(PopUpDialog, {\n        width: '250px',\n        data: {\n          question: \"Error \",\n          ok: false\n        }\n      });\n      return;\n    }\n\n    if (this._activatedRoute.snapshot.paramMap.get('productID') != \"\") {\n      const dialogRef = this.dialog.open(PopUpDialog, {\n        width: '250px',\n        data: {\n          question: \"Do you want to update this Product\",\n          ok: true\n        }\n      });\n      dialogRef.afterClosed().subscribe(data => {\n        if (data == true) {\n          this.product = Object.assign({}, this.firstFormGroup.value);\n          this.product['ID'] = '' + this._activatedRoute.snapshot.paramMap.get('productID');\n\n          this._productService.UpdateProduct(this.product).subscribe(data => {\n            this.back();\n          });\n        }\n      });\n    } else {\n      const dialogRef = this.dialog.open(PopUpDialog, {\n        width: '250px',\n        data: {\n          question: \"Do you want to Add this Product\",\n          ok: true\n        }\n      });\n      dialogRef.afterClosed().subscribe(data => {\n        if (data == true) {\n          this.product = Object.assign({}, this.firstFormGroup.value); //  console.log(this.product)\n\n          this._productService.AddProduct(this.product).subscribe(data => {\n            this.back();\n          });\n        }\n      });\n    }\n  }\n\n  back() {\n    this._location.back();\n  }\n\n};\nAddEditProdComponent = __decorate([Component({\n  selector: 'app-add-edit-prod',\n  templateUrl: './add-edit-prod.component.html',\n  styleUrls: ['./add-edit-prod.component.css']\n})], AddEditProdComponent);\nexport { AddEditProdComponent };","map":{"version":3,"sources":["S:/PlanA_Assessment/WebAppAngular/src/app/product/add-edit-prod/add-edit-prod.component.ts"],"names":["__decorate","Component","Validators","PopUpDialog","AddEditProdComponent","constructor","_categoryService","dialog","_productService","_location","_activatedRoute","formBuilder","fileUpload","selectedFile","selected","categorys","firstFormGroup","group","title","required","description","price","dietary_flags","number_of_Views","categoryID","onFileSelected","event","target","files","filedata","FormData","i","length","append","name","ngOnInit","getAllCategoryList","subscribe","data","productID","snapshot","paramMap","get","getProduct","product","console","log","JSON","stringify","controls","setValue","addBackGround","file","chooser","getFile","localStorage","setItem","dataURI","handlefileBackground","fileReader","FileReader","onload","e","result","readAsDataURL","onSubmit","invalid","dialogRef","open","width","question","ok","afterClosed","Object","assign","value","UpdateProduct","back","AddProduct","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { Component } from '@angular/core';\r\nimport { Validators } from '@angular/forms';\r\nimport { PopUpDialog } from '../../pop-up-dialog/pop-up.component';\r\nlet AddEditProdComponent = class AddEditProdComponent {\r\n    constructor(_categoryService, dialog, _productService, _location, _activatedRoute, formBuilder) {\r\n        this._categoryService = _categoryService;\r\n        this.dialog = dialog;\r\n        this._productService = _productService;\r\n        this._location = _location;\r\n        this._activatedRoute = _activatedRoute;\r\n        this.formBuilder = formBuilder;\r\n        this.fileUpload = '';\r\n        this.selectedFile = [];\r\n        this.selected = '';\r\n        this.categorys = [];\r\n        this.firstFormGroup = this.formBuilder.group({\r\n            title: ['', Validators.required],\r\n            description: ['', null],\r\n            price: [0, Validators.required],\r\n            dietary_flags: ['', Validators.required],\r\n            number_of_Views: [0, null],\r\n            categoryID: ['', Validators.required],\r\n        });\r\n    }\r\n    onFileSelected(event) {\r\n        this.selectedFile = event.target.files;\r\n        const filedata = new FormData();\r\n        for (var i = 0; i < this.selectedFile.length; i++) {\r\n            filedata.append('image', this.selectedFile[i], this.selectedFile[i].name);\r\n        }\r\n    }\r\n    ngOnInit() {\r\n        this._categoryService.getAllCategoryList().subscribe(data => {\r\n            // console.log(\"getAllCategoryList\" + JSON.stringify(data))\r\n            this.categorys = data;\r\n            // console.log(\"getAllCategoryList\" + JSON.stringify(this.categorys))\r\n            this.selected = this.categorys[0]['id'];\r\n            // console.log(\"selected\" + this.selected)\r\n        });\r\n        let productID = this._activatedRoute.snapshot.paramMap.get('productID');\r\n        if (productID != \"\") {\r\n            this._productService.getProduct(productID).subscribe(data => {\r\n                this.product = data;\r\n                console.log(JSON.stringify(this.product));\r\n                this.firstFormGroup.controls['title'].setValue(this.product['title']);\r\n                this.firstFormGroup.controls['description'].setValue(this.product['description']);\r\n                this.firstFormGroup.controls['price'].setValue(this.product['price']);\r\n                this.firstFormGroup.controls['dietary_flags'].setValue(this.product['dietary_flags']);\r\n                this.firstFormGroup.controls['number_of_Views'].setValue(this.product['number_of_Views']);\r\n            });\r\n        }\r\n    }\r\n    addBackGround() {\r\n        (async () => {\r\n            const file = await chooser.getFile();\r\n            if (file.length === 0) {\r\n                console.log(\"return return \");\r\n                return;\r\n            }\r\n            localStorage.setItem('handlefileBackground', file.dataURI);\r\n            console.log(\"addBackGround stringify \" + file.dataURI);\r\n            // console.log(\"addBackGround stringify \"+JSON.parse(file));\r\n            console.log(file ? file.name : 'canceled');\r\n        })();\r\n        //console.log(\"addBackGround\");\r\n        //document.getElementById('fileBackground').click();\r\n    }\r\n    handlefileBackground(files) {\r\n        if (files.length === 0) {\r\n            return;\r\n        }\r\n        let fileReader = new FileReader();\r\n        fileReader.onload = (e) => {\r\n            this.fileUpload = fileReader.result + \"\";\r\n            console.log(\"this.fileUpload\" + this.fileUpload);\r\n        };\r\n        fileReader.readAsDataURL(files[0]);\r\n    }\r\n    onSubmit() {\r\n        if (this.firstFormGroup.invalid) {\r\n            const dialogRef = this.dialog.open(PopUpDialog, {\r\n                width: '250px',\r\n                data: { question: \"Error \", ok: false }\r\n            });\r\n            return;\r\n        }\r\n        if (this._activatedRoute.snapshot.paramMap.get('productID') != \"\") {\r\n            const dialogRef = this.dialog.open(PopUpDialog, {\r\n                width: '250px',\r\n                data: { question: \"Do you want to update this Product\", ok: true }\r\n            });\r\n            dialogRef.afterClosed().subscribe(data => {\r\n                if (data == true) {\r\n                    this.product = Object.assign({}, this.firstFormGroup.value);\r\n                    this.product['ID'] = '' + this._activatedRoute.snapshot.paramMap.get('productID');\r\n                    this._productService.UpdateProduct(this.product).subscribe(data => { this.back(); });\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            const dialogRef = this.dialog.open(PopUpDialog, {\r\n                width: '250px',\r\n                data: { question: \"Do you want to Add this Product\", ok: true }\r\n            });\r\n            dialogRef.afterClosed().subscribe(data => {\r\n                if (data == true) {\r\n                    this.product = Object.assign({}, this.firstFormGroup.value);\r\n                    //  console.log(this.product)\r\n                    this._productService.AddProduct(this.product).subscribe(data => { this.back(); });\r\n                }\r\n            });\r\n        }\r\n    }\r\n    back() {\r\n        this._location.back();\r\n    }\r\n};\r\nAddEditProdComponent = __decorate([\r\n    Component({\r\n        selector: 'app-add-edit-prod',\r\n        templateUrl: './add-edit-prod.component.html',\r\n        styleUrls: ['./add-edit-prod.component.css']\r\n    })\r\n], AddEditProdComponent);\r\nexport { AddEditProdComponent };\r\n"]},"metadata":{},"sourceType":"module"}